<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.springboot.delivery.mapper.AdminMapper">

<insert id="createCoupon" parameterType="com.springboot.delivery.model.Coupon">
    INSERT INTO b_coupon_tbl (
        cp_id,
        co_name,
        sale_price,
        created_date,
        end_date,
        minimum_purchase,
        store_id
    ) VALUES (
        b_coupon_seq.NEXTVAL,
        #{co_name},
        #{sale_price},
        #{created_date},
        TO_DATE(#{end_date}, 'YYYY-MM-DD'),
        #{minimum_purchase},
        #{store_id, jdbcType=VARCHAR}
    )
</insert>
    <!-- 전체 유저 조회 -->
<select id="getAllUsers" resultType="com.springboot.delivery.model.User">
    SELECT 
        user_id,
        user_name,
        email,
        password,
        user_phone,
        point,
        TO_CHAR(birth, 'YYYY-MM-DD') as birth,
        user_address
    FROM b_user_info 
    ORDER BY user_id
</select>
    
    <!-- 전체 쿠폰 조회 -->
    <select id="getAllCoupons" resultType="com.springboot.delivery.model.Coupon">
        SELECT * FROM b_coupon_tbl ORDER BY cp_id DESC
    </select>
    
    <!-- 쿠폰 삭제 -->
    <delete id="deleteCoupon" parameterType="Integer">
    DELETE FROM b_coupon_tbl WHERE cp_id = #{cp_id}
	</delete>
    

    <!-- 유저 삭제 -->
    <delete id="deleteUser">
        DELETE FROM b_user_info WHERE user_id = #{userId}
    </delete>

    
    
</mapper>